<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema de Reportes de Daños</title>
    <link rel="stylesheet" href="../css/style-dahsboard.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>

<body>
    <header class="panel-superior">
        <div class="header-content">
            <h1><i class="fas fa-exclamation-triangle"></i> SISTEMA DE REPORTES DE DAÑOS</h1>
            <div class="user-controls">
                <span id="user-welcome" class="user-info">Bienvenido, <span id="user-name">Usuario</span></span>
                <button id="logout-btn" class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                </button>
            </div>
        </div>
    </header>

    <main>
        <div class="contenedor">
            <aside class="sidebar">
                <h2>BIENVENIDO <br><span>"EMPRESA"</span></h2>
                <div class="mapa" id="map">
                </div>
            </aside>

            <section class="contenido">
                <div class="tabla-contenedor">
                    <table id="createTable">
                        <!-- La tabla se genera por db-panel.js -->
                    </table>
                </div>
            </section>
        </div>
    </main>

    <footer class="footer">
        <span><i class="fas fa-copyright"></i> 2025 Sistema de Reportes de Daños - Gestión Municipal</span>
    </footer>

    <!-- Scripts en orden específico -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Verificar que json-server esté disponible
        console.log("Verificando conexión con json-server...");
        fetch('http://localhost:3000/reports')
            .then(response => {
                if (response.ok) {
                    console.log("✅ JSON Server conectado correctamente");
                } else {
                    console.warn("⚠️ JSON Server responde pero con errores");
                }
            })
            .catch(error => {
                console.error("❌ JSON Server no disponible:", error);
            });
    </script>
    <script type="module" src="../js/dashboard.js"></script>
    <script type="module" src="../js/db-panel.js"></script>
    <script type="module" src="../js/maps/mapa.js"></script>
</body>
</html>